@model TeamAdmin.Web.Models.HomePageModel
@using System.Globalization
@using TeamAdmin.Lib.Util

@{
    ViewData["Title"] = "Home Page";
}

<div class="row">
    <h1 style="border-bottom:solid 1px rgba(255,255,255,0.3);">Welcome to Mapola FC</h1>
    <div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="6000">
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
            <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner" role="listbox">
            @if (Model != null && Model.News != null && Model.News.Count() > 0)
            {
                int i = 0;
                @foreach (var news in Model.News.Take(3))
                {
                    <div class='item @(i == 0 ? "active" : "")'>
                        <a href="/news/@news.PostId/@news.Title.MakeSEOFriendlyUrl()">
                            <img style="max-height:400px;" src="@news.Media.FirstOrDefault().Url?w=230&h=70&mode=crop" srcset="@news.Media.FirstOrDefault().Url?w=1200&h=400&mode=crop 1200w, @news.Media.FirstOrDefault().Url?w=800&h=266&mode=crop 800w, @news.Media.FirstOrDefault().Url?w=600&h=200&mode=crop 600w, @news.Media.FirstOrDefault().Url?w=400&h=133&mode=crop 400w" alt="@news.Title" class="img-responsive" />
                            <div class="carousel-caption" role="option"><p>@news.Title</p></div>
                        </a>
                    </div>
                    i++;
                }
            }
        </div>
        <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    </div>
    <div class="row">
        <h2 style="border-bottom:solid 1px rgba(255,255,255,0.3);">Latest News</h2>
        @if (Model != null && Model.News != null && Model.News.Count() > 0)
        {
            @foreach (var news in Model.News.Take(8))
            {
                <div class="col-sm-6 col-md-3">
                    <a href="/news/@news.PostId/@news.Title.MakeSEOFriendlyUrl()" class="thumbnail">
                        <img class="media-object" src="@news.Media.FirstOrDefault().Url?w=200&h=117&mode=crop" srcset="@news.Media.FirstOrDefault().Url?w=200&h=117&mode=crop 200w, @news.Media.FirstOrDefault().Url?w=360&h=210&mode=crop 360w" alt="@news.Title">
                        <h4 class="caption media-heading">@news.Title</h4>
                    </a>
                </div>
            }
        }
    </div>
    <div class="row">
        <h2 style="border-bottom:solid 1px rgba(255,255,255,0.3);">Upcoming Events</h2>
        @if (Model != null && Model.Events != null && Model.Events.Count() > 0)
        {
            @foreach (var evnt in Model.Events.Take(6))
            {
                <div class="col-sm-6 col-md-4">
                    <div class="panel panel-default">
                        <div class="media">
                            <div class="media-left">
                                <div class="media-object calendar-item">
                                    <div class="calendar-month">@(CultureInfo.CurrentCulture.DateTimeFormat.GetAbbreviatedMonthName(evnt.Key.Month).ToUpper())</div>
                                    <div class="calendar-date">@evnt.Key.Day.ToString("00")</div>
                                    <div class="calendar-day">@(CultureInfo.CurrentCulture.DateTimeFormat.GetAbbreviatedDayName(evnt.Key.DayOfWeek).ToUpper())</div>
                                </div>
                            </div>
                            <div class="media-body list-group">
                                @foreach (var item in evnt)
                                {
                                    <div class="media-heading list-group-item" style="background-color:white;"><span style="color:darkred;font-weight:700; text-transform:capitalize;">@item.EventType:</span>
                                        @foreach (var t in item.Teams)
                                        {
                                            <span style="margin-right:5px;font-weight:700;">@(string.IsNullOrWhiteSpace(t.DisplayName) ? t.Name : t.DisplayName) @(item.EventType == TeamAdmin.Core.EventType.GAME ? "vs " + @item.Title : "")</span>
                                        }
                                        <div style="color:darkred;font-weight:700;"><span class="glyphicon glyphicon-time" aria-hidden="true"></span> @item.StartDate.ToString("hh:mmtt") - @item.EndDate.ToString("hh:mmtt")</div>
                                        <div>@item.Address</div>

                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            }
        }
    </div>
